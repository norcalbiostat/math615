{
  "hash": "d394916cb736d44c7160df8c5f41d33a",
  "result": {
    "markdown": "---\ntitle: \"Statistical Inference with Mathmatical Models\"\ndate: \"2023-10-02\"\ndescription: \"8\"\n---\n\n\n\n# Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstent30 <- openintro::stent30\n```\n:::\n\n\n![](images/paranormal.png)\n\n## Refresher on the Normal Distribution \n\n:::{layout-ncol=2}\nThe normal distribution is used to describe the variability associated with sample statistics which are taken from either repeated samples or repeated experiments. The normal distribution is quite powerful in that it describes the variability of many different statistics such as the sample mean and sample proportions. \n\n<a href=\"https://twitter.com/RiddleMeCam/status/1557402268395139077?ref_src=twsrc%5Etfw\">![](images/clt_twitter.png)</a>\n\n:::\n\n\n\n## Collaborative Notes\nReturn to the collaborative notes and answer your assigned questions. \n\n[https://hackmd.io/@norcalbiostat/07-intro_inference](https://hackmd.io/@norcalbiostat/07-intro_inference)\n\n# Case study: Stents\n\n## Observed data\n\nConsider an experiment that examined whether implanting a stent in the brain of a patient at risk for a stroke helps reduce the risk of a stroke. The results from the first 30 days of this study are summarized in the following table.\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(stent30$group, stent30$outcome) |> addmargins()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            no event stroke Sum\n  control        214     13 227\n  treatment      191     33 224\n  Sum            405     46 451\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(stent30$group, stent30$outcome) |>  prop.table(margin=1) |>round(digits=2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            no event stroke\n  control       0.94   0.06\n  treatment     0.85   0.15\n```\n:::\n:::\n\n:::\n:::\n\nThese results are surprising! The point estimate suggests that patients who received stents may have a higher risk of stroke: $p_{trmt}−p_{ctrl}=0.090$.\n\n## Point estimate vs Interval estimate\n\nThe point estimate for the difference in proportions $p_{trmt}−p_{ctrl}=0.090$ is a single point estimate, based on this single sample.\n\n\\\n\nA *point estimate* is our best guess for the value of the parameter, so it makes sense to build the confidence interval around that value.\n\n## Constructing a 95% confidence interval (CI)\n\nWhen the sampling distribution of a point estimate can _reasonably be modeled as having a normal distribution_, the point estimate we observe will be within 1.96 standard errors of the true value of interest about 95% of the time. Thus, a 95% confidence interval for such a point estimate can be constructed:\n\n$$\\mbox{point estimate} \\pm 1.96 × SE$$\n\nWe can be 95% confident this interval captures the true value.\n\n## Construct a 95% CI for the stent example {.smaller}\n\nThe conditions necessary to ensure the point estimate $p_{trmt}−p_{ctrl}$ is nearly normal have been verified for you, and the estimate's standard error is $SE = 0.028$.\n\n-   Construct a 95% confidence interval for the change in 30-day stroke rates from usage of the stent.\n-   Interpret this interval in context of the problem.\n\n. . . \n\n$$0.090 \\pm 1.96×0.028 = (0.035,0.145)$$\n\nWe are 95% confident that implanting a stent in a stroke patient's brain increased the risk of stroke within 30 days by a rate of 0.035 to 0.145.\n\n## Important note\n\n:warning: it's incorrect to say that we can be 95% confident that the true value is inside the mean.\n\n![Figure 13.11: Twenty-five samples of size n=300 were collected from a population with p=0.30. For each sample, a confidence interval was created to try to capture the true proportion p. However, 1 of these 25 intervals did not capture p=0.30.](https://openintro-ims.netlify.app/13-foundations-mathematical_files/figure-html/95PercentConfidenceInterval-1.png)\n\n## \n\n-   This is one of the most common errors: while it might be useful to think of it as a probability, the confidence level only quantifies how plausible it is that the parameter is in the interval.\n-   Our intervals say nothing about the confidence of capturing individual observations, a proportion of the observations, or about capturing point estimates.\n-   Confidence intervals provide an interval estimate for and attempt to capture population parameters.\n\n## Hypothesis test\n\n::: {.callout-note icon=\"false\"}\n## First draft \nLet's setup a hypothesis to test if stents work to reduce the risk of a stroke.  \n:::\n\n\\\n\n$H_{0}$: Stents don't work\n\n$H_{A}$: Stents reduce the risk of a stroke\n\n## Hypothesis test\n\n::: {.callout-note icon=\"false\"}\n## Revision 1: \nMaking it a statement about two groups \n:::\n\n\n$H_{0}$: Patients who have a stent have the same risk of a stroke as patients who don't have a stent\n\n$H_{A}$: Patients who have a stent have lower risk of a stroke as patients who don't have a stent\n\n## Hypothesis test\n\n::: {.callout-note icon=\"false\"}\n## Revision 2: \nMake it a statement using summary statistics and removing the directionality of the hypothesis\n:::\n\n\\ \n\n$H_{0}$: The proportion of patients with a stent who have a stroke is the same as the proportion of patients without a stent who have a stroke. \n\n$H_{A}$: The proportion of patients with a stent who have a stroke is different than the proportion of patients without a stent who have a stroke. \n\n## Hypothesis test\n\n::: {.callout-note icon=\"false\"}\n## Revision 3: \nWriting it in symbols\n:::\n\nLet $p_{trmt}$ be the proportion of patients with a stent who have a stroke, and $p_{ctrl}$ be the proportion of patients without a stent who have a stroke \n\n\\\n\n$H_{0}: p_{trmt} = p_{ctrl}$\n\n$H_{A}: p_{trmt} \\neq p_{ctrl}$\n\n## Hypothesis test\n\n::: {.callout-note icon=\"false\"}\n## Revision 3.5: \n\nRewriting as a difference in parameters\n:::\n\nLet $p_{1}$ be the proportion of patients with a stent who have a stroke, and $p_{ctrl}$ be the proportion of patients without a stent who have a stroke \n\n\\\n\n$H_{0}: p_{trmt} - p_{ctrl} = 0$\n\n$H_{A}: p_{trmt} - p_{ctrl} \\neq 0$\n\n## Calculating a test statistic\n\n$$ Z = \\frac{\\mbox{point estimate - null value}}{SE}$$\n. . . \n$$ Z = \\frac{(p_{trmt} - p_{ctrl}) - 0}{SE_{p_{trmt} - p_{ctrl}}} = \\frac{.090}{.028} = 3.21 $$\n. . . \n$$ P(Z > 3.2) = .00068 \\qquad \\mbox{ (the p-value)}$$ \n. . . \n\nIf the true difference in proportions was 0, then the probability of observing a difference of 0.09 due to random chance is 0.00068. \n\n## \n\n![https://xkcd.com/1478/](https://imgs.xkcd.com/comics/p_values.png)\n\n\n## Using Confidence Intervals to test a hypothesis\n\n> We are 95% confident that implanting a stent in a stroke patient's brain increased the risk of stroke within 30 days by a rate of 0.035 to 0.145.\n\nSince the interval does not contain the null hypothesized value of 0 (is completely above 0), it means the data provide convincing evidence that the stent used in the study changed the risk of stroke within 30 days\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}