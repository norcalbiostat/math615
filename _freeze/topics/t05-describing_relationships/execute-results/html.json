{
  "hash": "3800a7907a5f3240485b6f65d176c3c4",
  "result": {
    "markdown": "---\ntitle: \"Describing Relationships\" # title \nsubtitle: \"First step in investigating a question about an association\" # sub title\ndescription: \"9/19-10/02\" #date range\n---\n\n::: {.cell}\n\n:::\n\n\n## Learning Path\n\n### Where we've been\n* Visualizing a single varible\n* Screening for potential errors and additional data management\n* Starting to describe our project data\n\n### Where we're at\n* Ready to visualize associations between multiple variables. \n\n\n### Objectives\n\n\n::: {.cell}\n::: {.cell-output-display}\n* Create appropriate summary statistics and visualizations for combinations of two measures.\n\n<!-- end of list -->\n:::\n:::\n\n\n\n## Learning Materials\n\n{{< fa person-chalkboard >}}  **Slides (Will open in full screen. Right click to open in a new tab)**\n\n\n::: {.cell}\n::: {.cell-output-display}\n* [Describing relationships between two variables](../slides/lec05-describing_relationships.html)\n\n<!-- end of list -->\n:::\n:::\n\n\n:books:  **Reading** \n\n\n::: {.cell}\n::: {.cell-output-display}\n* PMA6 Ch 4\n  * ASCN Ch 2.4\n\n<!-- end of list -->\n:::\n:::\n\n\n\n:pencil: **Collaborative notes**\n\n\n::: {.cell}\n::: {.cell-output-display}\n* _NA_\n\n<!-- end of list -->\n:::\n:::\n\n\n## Assignments\n\n\n::: {.cell}\n::: {.cell-output-display}\n* [HW05 Graphing Relationships](../hw/hw05-biv_graphing.html)\n\n<!-- end of list -->\n:::\n:::\n\n\n\n---\n\n# Notes\n\n_Bivariate_: Association between **2** variables\n\n### Naming conventions\n\n|      Response      |     Explanatory      |\n|:------------------:|:--------------------:|\n|         y          |          x           |\n|      outcome       |      predictor       |\n| dependent variable | independent variable |\n|                    |      covariate       |\n|                    |       feature        |\n\n\\\n\n:::{.callout-tip}\n### Model notation: $y \\sim x$\nWe will use _model notation_ often to quickly describe what the outcome and predictors are. \n:::\n\n### Types of combinations\n\n-   Categorical response and categorical explanatory variable. (C \\~ C)\n-   Quantitative response and categorical explanatory variable. (Q \\~ C)\n-   Quantitative response and quantitative explanatory variable. (Q \\~ Q)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse);library(palmerpenguins)\nlibrary(sjPlot); library(ggpubr)\n\npen <- penguins\n```\n:::\n\n\n<img src=\"../images/penguins.png\" width=\"60%\">\n\n## C~C\nCategorical response & Categorical explanatory\n\n::: panel-tabset\n### Two way tables (cross-tabs)\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$island)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            Biscoe Dream Torgersen\n  Adelie        44    56        52\n  Chinstrap      0    68         0\n  Gentoo       124     0         0\n```\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$island) |> \n  prop.table(margin=2) |> round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            Biscoe Dream Torgersen\n  Adelie      0.26  0.45      1.00\n  Chinstrap   0.00  0.55      0.00\n  Gentoo      0.74  0.00      0.00\n```\n:::\n:::\n\n:::\n:::\n\n-   All of the 52 penguins on Torgersen island are the *Adelie* species.\n-   74% of penguins on Biscoe island are *Gentoo*.\n\n### Plots\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_xtab(pen$island, grp=pen$species, show.total = FALSE)\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n:::\n\n:::{.callout-warning}\n### Watch your margins \nOne of the most common places for a mistake when creating a plot or a table between two categorical variables is by not paying close attention to the choice of denominator. And then also confirming the interpretation matches the table, which matches the plot. \n:::\n\n::: panel-tabset\n### Tables\n\n::: columns\n::: {.column width=\"48%\"}\n**Row Percents**\nPercentages add up to 100 across the rows. The row levels are the denominator. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$island) |> \n  prop.table(margin=1) |> round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            Biscoe Dream Torgersen\n  Adelie      0.29  0.37      0.34\n  Chinstrap   0.00  1.00      0.00\n  Gentoo      1.00  0.00      0.00\n```\n:::\n:::\n\n\n29% **of *Adelie* penguins** are on Biscoe Island.\n:::\n\n::: {.column width=\"48%\"}\n**Column Percents**\nPercentages add up to 100 down the columns. The column levels are the denominator. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(pen$species, pen$island) |> \n  prop.table(margin=2) |> round(2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n           \n            Biscoe Dream Torgersen\n  Adelie      0.26  0.45      1.00\n  Chinstrap   0.00  0.55      0.00\n  Gentoo      0.74  0.00      0.00\n```\n:::\n:::\n\n\n74% **of penguins on Biscoe island** are *Gentoo*.\n:::\n:::\n\n### Plots\n\n::: columns\n::: {.column width=\"50%\"}\nDistribution of islands for each species\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_xtab(pen$species, \n          grp=pen$island, \n          margin = \"row\", \n          show.total = FALSE)\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n29% **of *Adelie* penguins** are on Biscoe Island.\n:::\n\n::: {.column width=\"50%\"}\nDistribution of species on each island.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_xtab(pen$island, \n          grp=pen$species, \n          margin = \"row\", \n          show.total = FALSE)\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n74% **of penguins on Biscoe island** are *Gentoo*.\n:::\n:::\n:::\n\n## Q~C\nQuantitative response & Categorical explanatory. The method here is to use all of the summary statistics (5 number summary, mean, median, sd etc) and plots (boxplot, histogram) and calculate/create those items _separately for each level of the categorical variable_. \n\n::: panel-tabset\n### Grouped summary statistics\n\nMean, median, sd, IQR of the quantitative variable for each level of the categorical level.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npen %>% group_by(species) %>% \n  summarize(mean = mean(bill_depth_mm, na.rm = TRUE), \n            median = median(bill_depth_mm, na.rm = TRUE), \n            sd = sd(bill_depth_mm, na.rm = TRUE), \n            IQR = IQR(bill_depth_mm, na.rm = TRUE))\n```\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 Ã— 5\n  species    mean median    sd   IQR\n  <fct>     <dbl>  <dbl> <dbl> <dbl>\n1 Adelie     18.3   18.4 1.22   1.5 \n2 Chinstrap  18.4   18.4 1.14   1.90\n3 Gentoo     15.0   15   0.981  1.5 \n```\n:::\n:::\n\n\nGentoo penguins have lower average bill depth compared to Adelie or Chinstrap (15.0mm vs 18.3 and 18.4mm respectively). Chinstrap however have a larger IQR at 1.9 compared to 1.5 for the others.\n\n### Plots\n\n::: columns\n::: {.column width=\"50%\"}\n**Overlaid density plots**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngghistogram(pen, \n            x = \"bill_depth_mm\", \n            fill = \"species\", \n            add_density = TRUE, \n            add=\"mean\")\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n**Side by side boxplots**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggviolin(pen, \n         x=\"species\", \n         y = \"bill_depth_mm\", \n         color = \"species\", \n         add = c(\"mean\", \"boxplot\"))\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n:::\n:::\n\nThe distribution of bill depth are fairly normal for each species, with some higher end values causing a slight right skew for Adelie and Gentoo.\n:::\n\n## Q~Q\nQuantitative response & Quantitative explanatory\n\n::: panel-tabset\n### Summary statistic\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor(pen$flipper_length_mm, pen$body_mass_g, \n    use=\"pairwise.complete.obs\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.8712018\n```\n:::\n:::\n\n\nThe penguin flipper length (mm) has a strong positive correlation with body mass (g), r=0.87\n\n### Plots\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggscatter(pen, \n          x=\"flipper_length_mm\", \n          y = \"body_mass_g\")\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nggscatter(pen, \n          x=\"flipper_length_mm\", \n          y = \"body_mass_g\", \n          add = \"loess\", \n          conf.int = TRUE)\n```\n\n::: {.cell-output-display}\n![](t05-describing_relationships_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n:::\n\n<small> The relationship between flipper length and body mass in penguins is relatively linear, but there may be possible clustering on a third variable. There appears to be two groups below and above a flipper length of about 205mm. </small>\n:::\n:::",
    "supporting": [
      "t05-describing_relationships_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}